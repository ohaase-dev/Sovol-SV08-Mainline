## DO NOT EDIT THIS FILE, IT IS A TEMPLATE. THAT YOU NEED TO COPY
# Sovol SV08 Klipper Config
# inspiration from: https://github.com/dz0ny/klipper-prusa-mk3s/

# The first thing you'll need to do is go through this file and 
# set the correct device paths for your printer.
# also comment out / uncomment
# the files and/or settings you need.

# You'll be able to print just fine with this config as it is.

# Read more about klipper here: https://www.klipper3d.org/Overview.html

### UI
[include mainsail.cfg]
[include timelapse.cfg] # DONT FORGET TO INSTALL THE TIMELAPSE PLUGIN

### MCU
[mcu]      
serial: /dev/serial/by-id/usb-Klipper_stm32f103xe_
restart_method: command

[mcu extra_mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32f103xe_
restart_method: command

### sv08 includes
[include sv08-mainline-config/sovol/base.cfg]
[include sv08-mainline-config/sovol/steppers.cfg]
[include sv08-mainline-config/sovol/tmc2209.cfg]
[include sv08-mainline-config/sovol/fans.cfg]
 
### Optional includes/tuning
# IF YOU ARE USING THE SCREEN THAT COMES WITH THE PRINTER
[include sv08-mainline-config/sovol/options/lcd/*.cfg]
# IF YOU HAVE KLIPPERSCREEN / AN HDMI DISPLAY ATTACHED TO YOUR PRINTER
# [include sv08-mainline-config/sovol/options/hdmi/*.cfg]

# TMC2209 tuning values, use at one's own risk (see: SV08 TMC 2209 accurate technical settings/README.md)
# [include sv08-mainline-config/sovol/options/tmc2209_tuning.cfg]

### MACROS
[include sv08-mainline-config/sovol/sovol-macros.cfg]

### Other parameters
[extruder]
# To tune Pressure Advance see https://www.klipper3d.org/Pressure_Advance.html
# default is already set based on hotend, but you can further improve prints by calibrating it to your nozzle and material
pid_kp : 33.838
pid_ki : 5.223
pid_kd : 47.752

[pause_resume]

[exclude_object]

[virtual_sdcard]
path: ~/printer_data/gcodes
on_error_gcode: CANCEL_PRINT

[save_variables]
filename: ~/printer_data/config/saved_variables.cfg

# disabled by default, since toolhead_mcu needs to be flashed first (see README) uncomment to enable
# default values applied
#[include input_shaping.cfg]
[input_shaper]
damping_ratio_x: 0.001
damping_ratio_y: 0.001
shaper_type_x: mzv
shaper_freq_x: 35
shaper_type_y: mzv
shaper_freq_y: 35

[probe]
pin: extra_mcu:PB6    
x_offset: -17                  
y_offset: 10             
z_offset : 0
speed: 5.0
samples: 2
sample_retract_dist: 2.0
lift_speed: 50
samples_result: average
samples_tolerance: 0.016
samples_tolerance_retries: 2

#more precise from tcm2209 tuning
# [probe]
# pin: extra_mcu:PB6    
# x_offset: -17                  
# y_offset: 10             
# #z_offset : 0
# speed: 5.0
# samples: 3 #2
# sample_retract_dist: 5.0 #2.0
# lift_speed: 50
# samples_result: average
# samples_tolerance: 0.0075 #0.016
# samples_tolerance_retries: 10 #2

[probe_pressure]
pin: ^!PE12     
x_offset: 0                  
y_offset: 0
z_offset : 0
speed: 1.0

### The end, on the end the printer will store it's tuning data, so do not edit it.